webpackJsonp([1],{0:function(e,t){},AMuX:function(e,t){},AsDT:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgYmFja2dyb3VuZD0iIzFmOWNmNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDBWMHoiLz48cGF0aCBkPSJNMy40IDIwLjRsMTcuNDUtNy40OGMuODEtLjM1LjgxLTEuNDkgMC0xLjg0TDMuNCAzLjZjLS42Ni0uMjktMS4zOS4yLTEuMzkuOTFMMiA5LjEyYzAgLjUuMzcuOTMuODcuOTlMMTcgMTIgMi44NyAxMy44OGMtLjUuMDctLjg3LjUtLjg3IDFsLjAxIDQuNjFjMCAuNzEuNzMgMS4yIDEuMzkuOTF6Ii8+PC9zdmc+"},KVaI:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),r={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var a=s("VU/8")({name:"App"},r,!1,function(e){s("AMuX")},null,null).exports,i=s("/ocq"),u=s("Xxa5"),o=s.n(u),c=s("exGp"),l=s.n(c),d=s("DmT9"),m=s.n(d),h=s("fzx2"),v={data:function(){return{isConnected:!1,userMessages:[],inputText:"",userId:"",username:"",users:[],socket:null,isActive:!0}},methods:{connectSocker:function(){var e=this,t=Object({NODE_ENV:"production"}).PORT||3e3;console.log("post: ",t),console.log("env: ",Object({NODE_ENV:"production"}).PORT),Object({NODE_ENV:"production"}).PORT?this.socket=m()("https://vue-chat-online.herokuapp.com/"):this.socket=m()("http://localhost:3000");var s={userId:this.userId,username:this.username};this.isConnected=!0,window.onbeforeunload=function(){e.removeUser(s),console.log("users: ",e.users),e.socket.emit("leave",s)},this.socket.emit("joinMain",s),this.socket.on("chatMessage",function(t){console.log("message: ",t),e.userMessages.push(t),e.scrollDown()}),this.socket.on("userDisconnected",function(t){console.log("message disconnect: ",t),e.removeUser(s),e.userMessages.push(t),console.log("users: ",e.users)}),this.socket.on("updateUsers",function(t){console.log("users: ",t),e.users=t})},sendMessage:function(){if(""!==this.inputText){var e={userId:this.userId,username:this.username,message:this.inputText,server:!1};this.socket.emit("chatMessage",e),this.inputText=""}},checkLocalStorage:function(){this.$store.getters.getUsername?(this.username=this.$store.getters.getUsername,this.userId=this.$store.getters.getUserId):this.$router.push({path:"/"})},generateUuid:function(){this.userId=h.b.v4(),this.$store.dispatch("set_user_id",this.userId),console.log("userId :",this.userId)},removeUser:function(e){this.users.splice(this.users.indexOf(function(t){return t.userId===e.userId}),1)},scrollDown:function(){var e=this;return l()(o.a.mark(function t(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=document.getElementById("chat"),setTimeout(function(){s.scrollTop=s.scrollHeight},100);case 2:case"end":return e.stop()}},t,e)}))()},isMainUser:function(e){return e.userId===this.userId}},beforeMount:function(){this.generateUuid(),this.checkLocalStorage()},mounted:function(){this.connectSocker()}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat"},[s("div",{staticClass:"chat-container"},[e._m(0),e._v(" "),s("div",{staticClass:"chat-body"},[s("div",{staticClass:"chatbox-card w-30"},e._l(e.users,function(t){return s("div",{key:t.userId,staticClass:"user-row p-20",class:{mainuser:e.isMainUser(t)}},[s("div",{staticClass:"user-icon"}),e._v(" "),s("div",{staticClass:"username"},[e._v(e._s(e._f("capitalize")(t.username)))])])}),0),e._v(" "),s("div",{staticClass:"chatbox-card w-70"},[s("div",{staticClass:"message-container",attrs:{id:"chat"}},e._l(e.userMessages,function(t){return s("div",{key:t.id,staticClass:"msg-holder"},[t.server?s("div",{staticClass:"server-msg"},[e._v("\n              "+e._s(e._f("capitalize")(t.message))+"\n            ")]):e._e(),e._v(" "),t.server||t.userId===e.userId?e._e():s("div",[s("div",{staticClass:"user-left-name"},[e._v("\n                "+e._s(e._f("capitalize")(t.username))+"\n              ")]),e._v(" "),s("div",{staticClass:"user-msg msg-left"},[e._v("\n                "+e._s(t.message)+"\n              ")])]),e._v(" "),t.server||t.userId!==e.userId?e._e():s("div",{staticClass:"user-msg msg-right"},[e._v("\n              "+e._s(t.message)+"\n            ")])])}),0),e._v(" "),s("form",{staticClass:"message-input",attrs:{action:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],staticClass:"mr-10 w-85",attrs:{type:"text",name:"message",placeholder:"Digite uma mensagem..."},domProps:{value:e.inputText},on:{input:function(t){t.target.composing||(e.inputText=t.target.value)}}}),e._v(" "),e._m(1)])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-header"},[t("div",{staticClass:"tab-chat"},[t("div",{staticClass:"tab-txt tab-selected"},[this._v("Global")])]),this._v(" "),t("div",{staticClass:"tab-chat"},[t("div",{staticClass:"tab-txt"},[this._v("Private")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"w-15 send-btn"},[t("img",{attrs:{type:"submit",src:s("AsDT"),alt:""}})])}]};var f=s("VU/8")(v,p,!1,function(e){s("OSk0")},"data-v-31881ef2",null).exports,g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Enter a username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),s("button",{attrs:{disabled:""===e.username},on:{click:function(t){return t.preventDefault(),e.tochat(t)}}},[e._v("\n    Enter Chat\n  ")])])},staticRenderFns:[]};var _=s("VU/8")({name:"Home",data:function(){return{userId:null,username:""}},methods:{tochat:function(){this.$store.dispatch("set_username",this.username),this.$router.push({path:"/chat"})}}},g,!1,function(e){s("KVaI")},null,null).exports;n.a.use(i.a);var I=new i.a({routes:[{path:"/chat",name:"IListenToSockets",component:f},{path:"/",name:"Home",component:_}]}),M=s("NYxO");n.a.use(M.a);var C=new M.a.Store({state:{user:{userId:null,username:""}},mutations:{SET_USERNAME:function(e,t){e.user.username=t},SET_USER_ID:function(e,t){e.user.userId=t}},getters:{getUserId:function(e){return e.user.userId},getUsername:function(e){return e.user.username}},actions:{otherAction:function(e,t){return!0},set_username:function(e,t){e.commit("SET_USERNAME",t)},set_user_id:function(e,t){e.commit("SET_USER_ID",t)}}});n.a.use(h.a),n.a.config.productionTip=!1,n.a.filter("capitalize",function(e){return e?(e=e.toString()).charAt(0).toUpperCase()+e.slice(1):""}),new n.a({el:"#app",router:I,store:C,components:{App:a},template:"<App/>"})},OSk0:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6dfab151c24820e184af.js.map