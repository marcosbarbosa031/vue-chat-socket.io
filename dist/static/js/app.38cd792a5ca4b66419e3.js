webpackJsonp([1],{0:function(e,s){},KVaI:function(e,s){},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=t("7+uW"),r={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var a=t("VU/8")({name:"App"},r,!1,function(e){t("haiR")},null,null).exports,i=t("/ocq"),u=t("Xxa5"),o=t.n(u),c=t("exGp"),l=t.n(c),m=t("DmT9"),d=t.n(m),h=t("fzx2"),p={data:function(){return{isConnected:!1,userMessages:[],inputText:"",userId:"",username:"",users:[],socket:null,isActive:!0}},methods:{connectSocker:function(){var e=this,s=d()("http://localhost:4113");this.socket=s;var t={userId:this.userId,username:this.username};this.isConnected=!0,window.onbeforeunload=function(){e.removeUser(t),console.log("users: ",e.users),e.socket.emit("leave",t)},this.socket.emit("joinMain",t),this.socket.on("chatMessage",function(s){console.log("message: ",s),e.userMessages.push(s),e.scrollDown()}),this.socket.on("userDisconnected",function(s){console.log("message disconnect: ",s),e.removeUser(t),e.userMessages.push(s),console.log("users: ",e.users)}),this.socket.on("updateUsers",function(s){console.log("users: ",s),e.users=s})},sendMessage:function(){var e={userId:this.userId,username:this.username,message:this.inputText,server:!1};this.socket.emit("chatMessage",e),this.inputText=""},checkLocalStorage:function(){this.$store.getters.getUsername?(this.username=this.$store.getters.getUsername,this.userId=this.$store.getters.getUserId):this.$router.push({path:"/"})},generateUuid:function(){this.userId=h.b.v4(),this.$store.dispatch("set_user_id",this.userId),console.log("userId :",this.userId)},removeUser:function(e){this.users.splice(this.users.indexOf(function(s){return s.userId===e.userId}),1)},scrollDown:function(){var e=this;return l()(o.a.mark(function s(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("chat"),setTimeout(function(){t.scrollTop=t.scrollHeight},100);case 2:case"end":return e.stop()}},s,e)}))()},isMainUser:function(e){return e.userId===this.userId}},beforeMount:function(){this.generateUuid(),this.checkLocalStorage()},mounted:function(){this.connectSocker()}},v={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"chat"},[t("div",{staticClass:"chat-container"},[t("div",{staticClass:"chatbox-card mr-10px w-30"},e._l(e.users,function(s){return t("div",{key:s.userId,staticClass:"user-row p-20",class:{mainuser:e.isMainUser(s)}},[t("div",{staticClass:"user-icon"}),e._v(" "),t("div",{staticClass:"username"},[e._v(e._s(e._f("capitalize")(s.username)))])])}),0),e._v(" "),t("div",{staticClass:"chatbox-card ml-10px w-70"},[t("div",{staticClass:"message-container",attrs:{id:"chat"}},e._l(e.userMessages,function(s){return t("div",{key:s.id,staticClass:"msg-holder"},[s.server?t("div",{staticClass:"server-msg"},[e._v("\n            "+e._s(e._f("capitalize")(s.message))+"\n          ")]):e._e(),e._v(" "),s.server||s.userId===e.userId?e._e():t("div",[t("div",{staticClass:"user-left-name"},[e._v("\n              "+e._s(e._f("capitalize")(s.username))+"\n            ")]),e._v(" "),t("div",{staticClass:"user-msg msg-left"},[t("p",[e._v(e._s(s.message))])])]),e._v(" "),s.server||s.userId!==e.userId?e._e():t("div",{staticClass:"user-msg msg-right"},[t("p",[e._v(e._s(s.message))])])])}),0),e._v(" "),t("form",{staticClass:"message-input",attrs:{action:"",autocomplete:"off"},on:{submit:function(s){return s.preventDefault(),e.sendMessage(s)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputText,expression:"inputText"}],staticClass:"mr-10 w-85",attrs:{type:"text",name:"message"},domProps:{value:e.inputText},on:{input:function(s){s.target.composing||(e.inputText=s.target.value)}}}),e._v(" "),t("button",{staticClass:"w-15"},[e._v("Send")])])])])])},staticRenderFns:[]};var f=t("VU/8")(p,v,!1,function(e){t("Wffw")},"data-v-0da55b3e",null).exports,g={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Enter a username"},domProps:{value:e.username},on:{input:function(s){s.target.composing||(e.username=s.target.value)}}}),e._v(" "),t("button",{attrs:{disabled:""===e.username},on:{click:function(s){return s.preventDefault(),e.tochat(s)}}},[e._v("\n    Enter Chat\n  ")])])},staticRenderFns:[]};var _=t("VU/8")({name:"Home",data:function(){return{userId:null,username:""}},methods:{tochat:function(){this.$store.dispatch("set_username",this.username),this.$router.push({path:"/chat"})}}},g,!1,function(e){t("KVaI")},null,null).exports;n.a.use(i.a);var I=new i.a({routes:[{path:"/chat",name:"IListenToSockets",component:f},{path:"/",name:"Home",component:_}]}),x=t("NYxO");n.a.use(x.a);var U=new x.a.Store({state:{user:{userId:null,username:""}},mutations:{SET_USERNAME:function(e,s){e.user.username=s},SET_USER_ID:function(e,s){e.user.userId=s}},getters:{getUserId:function(e){return e.user.userId},getUsername:function(e){return e.user.username}},actions:{otherAction:function(e,s){return!0},set_username:function(e,s){e.commit("SET_USERNAME",s)},set_user_id:function(e,s){e.commit("SET_USER_ID",s)}}});n.a.use(h.a),n.a.config.productionTip=!1,n.a.filter("capitalize",function(e){return e?(e=e.toString()).charAt(0).toUpperCase()+e.slice(1):""}),new n.a({el:"#app",router:I,store:U,components:{App:a},template:"<App/>"})},Wffw:function(e,s){},haiR:function(e,s){}},["NHnr"]);
//# sourceMappingURL=app.38cd792a5ca4b66419e3.js.map